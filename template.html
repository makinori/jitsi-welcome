<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
		/>
		<link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
		<title>Hotmilk Jitsi</title>
		<meta property="og:title" content="Hotmilk Jitsi" />
		<meta
			property="og:description"
			content="Join a WebRTC video conference powered by the Jitsi Videobridge"
		/>
		<meta
			description="Join a WebRTC video conference powered by the Jitsi Videobridge"
		/>
		<meta itemprop="name" content="Hotmilk Jitsi" />
		<meta
			itemprop="description"
			content="Join a WebRTC video conference powered by the Jitsi Videobridge"
		/>
		<meta itemprop="image" content="images/jitsilogo.png" />
		<link rel="icon" href="images/favicon.svg" />
		<style>
			* {
				margin: 0;
			}

			@font-face {
				font-family: "SN Pro";
				src: url("/welcome/SNPro-VariableRegular.woff2")
					format("woff2-variations");
				font-weight: 200 900;
				font-style: normal;
			}

			@font-face {
				font-family: "SN Pro";
				src: url("/welcome/SNPro-VariableItalic.woff2")
					format("woff2-variations");
				font-weight: 200 900;
				font-style: italic;
			}

			body {
				font-family: "SN Pro", sans-serif;
				background-color: #111;
				background-image: linear-gradient(
						0deg,
						rgba(17, 17, 17, 0.7),
						rgba(17, 17, 17, 0.7)
					),
					url("/welcome/background.jpg");
				background-size: cover;
				background-position: center;
				overflow: hidden;
				width: 100vw;
				height: 100vh;
				display: flex;
				align-items: center;
				justify-content: center;
				color: #fff;
			}

			.content {
				/* margin-bottom: 32px; */
			}

			.content,
			.content > form {
				display: flex;
				flex-direction: column;
				gap: 16px;
				align-items: flex-start;
			}

			.content h1 {
				font-size: 48px;
				line-height: 32px;
				font-weight: 800;
				letter-spacing: -0.03em;
			}

			input,
			button {
				font-family: "SN Pro", sans-serif;
				padding: 6px 12px;
				border-radius: 12px;
				border: none;
				font-size: 20px;
			}

			input {
				border: solid 3px rgba(255, 255, 255, 0.4);
				color: #fff;
				background: transparent;
				font-weight: 500;
			}

			input::placeholder {
				color: rgba(255, 255, 255, 0.5);
			}

			input:focus {
				outline: none;
			}

			.content input {
				width: 350px;
			}

			button {
				background: #ff1744;
				color: #fff;
				font-weight: 800;
				cursor: pointer;
			}

			.content button {
				width: 150px;
				/* width: 100%; */
			}
		</style>
	</head>
	<body>
		<div class="content">
			<h1>hotmilk jitsi</h1>
			<form id="form">
				<input
					type="text"
					placeholder="leave empty for random"
					autocomplete="off"
				/>
				<button type="submit">join</button>
			</form>
		</div>
		<script>
			const form = document.getElementById("form");
			form.addEventListener("submit", async e => {
				e.preventDefault();

				let name = form.querySelector("input").value;
				if (name == null || name == "") {
					// name = "{{.RandomRoomName}}";
					// prevent caching
					const res = await fetch("/welcome/name");
					const data = await res.json();
					name = data.name;
				}

				window.location.href = "/" + name;
			});
		</script>
	</body>
</html>
